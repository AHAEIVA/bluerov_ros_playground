#!/usr/bin/env python

import bluerov.video as Video
import cv2
import rospy

def main():
    udp_port = 5600
    try:
        udp_port = rospy.get_param("/bluerov_video/udp_port")
        rospy.loginfo("udp_port: {}".format(udp_port))
    except Exception as error:
        rospy.loginfo(error)

    video = Video.Video(udp_port)

    while True:
        if not video.frame_available():
            continue

        frame = video.frame()
        cv2.imshow('frame', frame)
        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

if __name__ == '__main__':
    main()